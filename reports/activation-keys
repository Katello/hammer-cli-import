
synopsis:

	Activation-keys defined on the system

description:

	Lists all activation-keys and various entities associated with each key

columns:

        key_org:i            The organization that owns the key
        key_token:i          The actual token for this key
        key_note             Description of this activation-key
        key_usage_limit      What is the key's usage-limit?
        key_is_disabled      Is the key disabled?
        key_deploys_configs  Does this key require config-files be deployed?
        channel              Channels the key subscribes a system to
        server_group_type    Entitlements the key gives to the server
        server_group_name    Server-groups the key places the server into
        package_name         packages the key deploys to te system


multival_columns:

        key_org
        key_token
        channel : channel 
        server_group_type : server_group_type
        server_group_name : server_group_name
	package_name : package_name

sql:

	select * from (
	  select rt.org_id key_org, ak.token key_token, 
		 rt.note key_note, rt.usage_limit key_usage_limit, 
		 rt.disabled key_is_disabled, rt.deploy_configs key_deploys_configs,
		 rc.label channel,
		 sgt.label server_group_type,
		 sg.name server_group_name,
		 pn.name package_name
	  from rhnactivationkey ak
	       inner join rhnregtoken rt ON rt.id = ak.reg_token_id
	       left outer join rhnregtokenchannels rtc on rtc.token_id = rt.id
	       left outer join rhnchannel rc on rc.id = rtc.channel_id
	       left outer join rhnregtokenentitlement rte on rte.reg_token_id = rt.id
	       left outer join rhnservergrouptype sgt on sgt.id = rte.server_group_type_id
	       left outer join rhnregtokengroups rtg on rtg.token_id = rt.id
	       left outer join rhnservergroup sg on sg.id = rtg.server_group_id
	       left outer join rhnregtokenpackages rtp on rtp.token_id = rt.id
	       left outer join rhnpackagename pn on pn.id = rtp.name_id
	) X
	-- where placeholder
	order by key_org, key_token, channel, server_group_type, server_group_name, package_name
	  
